package warehouse;

import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

public abstract class ShoppingCenter implements IShoppingCenter, IShoppingCenter {
	
	private static final int STARTING_CAPACITY = 15;
	private Map<Product, Integer> products =
			new ConcurrentHashMap<Product, Integer>();
	
	
	public ShoppingCenter() {
		for(String productName : new String[]{"Banan", "Orange", "Apple"}){
			products.put(new Product(productName, FoodProduct.FRUITS), STARTING_CAPACITY);
		}
		for(String productName : new String[]{"Potato", "Eggplant","Cucumber"}){
			products.put(new Product(productName, FoodProduct.VEGETABLES), STARTING_CAPACITY);
		}
		
		for(String productName : new String[]{"Pork", "Beef","Chicken"}){
			products.put(new Product(productName, FoodProduct.MEATS), STARTING_CAPACITY);
		}
		
	}

	/* (non-Javadoc)
	 * @see warehouse.IShoppingCenter#addProduct(warehouse.Product, int)
	 */
	@Override
	public void addProduct(Product product, int quantity) throws WareHouseException{
		if(product != null && quantity > 0 && products.containsKey(product)){
			int amount = products.get(product);
			amount += quantity;
			products.put(product, amount);
		}
		else{
			throw new WareHouseException("Can't axcept that product.");
		}
	}
	
	/* (non-Javadoc)
	 * @see warehouse.IShoppingCenter#removeProduct(warehouse.Product, int)
	 */
	@Override
	public void removeProduct(Product product, int quantity) throws WareHouseException{
		this.addProduct(product, -quantity);
	}
	
	
}
